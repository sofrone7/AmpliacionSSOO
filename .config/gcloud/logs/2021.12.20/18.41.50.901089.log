2021-12-20 18:41:50,901 DEBUG    root            Loaded Command Group: ['gcloud', 'sql']
2021-12-20 18:41:50,933 DEBUG    root            Loaded Command Group: ['gcloud', 'sql', 'connect']
2021-12-20 18:41:50,939 DEBUG    root            Running [gcloud.sql.connect] with arguments: [--user: "postgres", INSTANCE: "app-database"]
2021-12-20 18:41:50,951 DEBUG    google.auth.transport.requests Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/712862630822-compute@developer.gserviceaccount.com/?recursive=true
2021-12-20 18:41:50,953 DEBUG    urllib3.connectionpool Starting new HTTP connection (1): metadata.google.internal:80
2021-12-20 18:41:50,955 DEBUG    urllib3.connectionpool http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/712862630822-compute@developer.gserviceaccount.com/?recursive=true HTTP/1.1" 200 196
2021-12-20 18:41:50,956 DEBUG    google.auth.transport.requests Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/712862630822-compute@developer.gserviceaccount.com/token
2021-12-20 18:41:50,958 DEBUG    urllib3.connectionpool http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/712862630822-compute@developer.gserviceaccount.com/token HTTP/1.1" 200 268
2021-12-20 18:41:50,990 DEBUG    google.auth.transport.requests Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/712862630822-compute@developer.gserviceaccount.com/?recursive=true
2021-12-20 18:41:50,991 DEBUG    urllib3.connectionpool Starting new HTTP connection (1): metadata.google.internal:80
2021-12-20 18:41:50,993 DEBUG    urllib3.connectionpool http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/712862630822-compute@developer.gserviceaccount.com/?recursive=true HTTP/1.1" 200 196
2021-12-20 18:41:50,994 DEBUG    google.auth.transport.requests Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/712862630822-compute@developer.gserviceaccount.com/token
2021-12-20 18:41:50,996 DEBUG    urllib3.connectionpool http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/712862630822-compute@developer.gserviceaccount.com/token HTTP/1.1" 200 268
2021-12-20 18:41:51,007 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): sqladmin.googleapis.com:443
2021-12-20 18:41:51,042 DEBUG    urllib3.connectionpool https://sqladmin.googleapis.com:443 "GET /sql/v1beta4/projects/analog-bot-325915/instances/app-database?alt=json HTTP/1.1" 403 None
2021-12-20 18:41:51,043 DEBUG    root            (gcloud.sql.connect) There was no instance found at projects/analog-bot-325915/instances/app-database or you are not authorized to connect to it.
Traceback (most recent call last):
  File "/usr/lib/google-cloud-sdk/lib/surface/sql/connect.py", line 127, in _AllowlistClientIP
    project=instance_ref.project, instance=instance_ref.instance))
  File "/usr/lib/google-cloud-sdk/lib/googlecloudsdk/third_party/apis/sqladmin/v1beta4/sqladmin_v1beta4_client.py", line 609, in Get
    config, request, global_params=global_params)
  File "/usr/bin/../lib/google-cloud-sdk/lib/third_party/apitools/base/py/base_api.py", line 737, in _RunMethod
    return self.ProcessHttpResponse(method_config, http_response, request)
  File "/usr/bin/../lib/google-cloud-sdk/lib/third_party/apitools/base/py/base_api.py", line 743, in ProcessHttpResponse
    self.__ProcessHttpResponse(method_config, http_response, request))
  File "/usr/bin/../lib/google-cloud-sdk/lib/third_party/apitools/base/py/base_api.py", line 610, in __ProcessHttpResponse
    http_response, method_config=method_config, request=request)
apitools.base.py.exceptions.HttpForbiddenError: HttpError accessing <https://sqladmin.googleapis.com/sql/v1beta4/projects/analog-bot-325915/instances/app-database?alt=json>: response: <{'www-authenticate': 'Bearer realm="https://accounts.google.com/", error="insufficient_scope", scope="https://www.googleapis.com/auth/cloud-platform https://www.googleapis.com/auth/sqlservice.admin"', 'vary': 'Origin, X-Origin, Referer', 'content-type': 'application/json; charset=UTF-8', 'content-encoding': 'gzip', 'date': 'Mon, 20 Dec 2021 18:41:51 GMT', 'server': 'ESF', 'cache-control': 'private', 'x-xss-protection': '0', 'x-frame-options': 'SAMEORIGIN', 'x-content-type-options': 'nosniff', 'transfer-encoding': 'chunked', 'status': 403}>, content <{
  "error": {
    "code": 403,
    "message": "Request had insufficient authentication scopes.",
    "errors": [
      {
        "message": "Insufficient Permission",
        "domain": "global",
        "reason": "insufficientPermissions"
      }
    ],
    "status": "PERMISSION_DENIED",
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.ErrorInfo",
        "reason": "ACCESS_TOKEN_SCOPE_INSUFFICIENT",
        "domain": "googleapis.com",
        "metadata": {
          "service": "sqladmin.googleapis.com",
          "method": "google.cloud.sql.v1beta4.SqlInstancesService.Get"
        }
      }
    ]
  }
}
>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/google-cloud-sdk/lib/googlecloudsdk/calliope/cli.py", line 987, in Execute
    resources = calliope_command.Run(cli=self, args=args)
  File "/usr/lib/google-cloud-sdk/lib/googlecloudsdk/calliope/backend.py", line 809, in Run
    resources = command_instance.Run(args)
  File "/usr/lib/google-cloud-sdk/lib/surface/sql/connect.py", line 393, in Run
    return RunConnectCommand(args, supports_database=True)
  File "/usr/lib/google-cloud-sdk/lib/surface/sql/connect.py", line 238, in RunConnectCommand
    client.resource_parser)
  File "/usr/lib/google-cloud-sdk/lib/surface/sql/connect.py", line 132, in _AllowlistClientIP
    'connect to it.'.format(instance_ref.RelativeName()))
googlecloudsdk.api_lib.sql.exceptions.ResourceNotFoundError: There was no instance found at projects/analog-bot-325915/instances/app-database or you are not authorized to connect to it.
2021-12-20 18:41:51,044 ERROR    root            (gcloud.sql.connect) There was no instance found at projects/analog-bot-325915/instances/app-database or you are not authorized to connect to it.
